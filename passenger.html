<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Passenger - SmartBus Tracker</title>
  <style>
    body{
      font-family:Arial, sans-serif;
      margin:0;
      padding:0;
      background:#f8fafc;
      color:#0f172a;
      display:flex;
      height:100vh;
    }

    /* Sidebar */
    .sidebar{
      width:260px;
      background:#1e40af;
      color:#fff;
      padding:20px;
      overflow-y:auto;
    }
    .sidebar h2{
      font-size:1.2rem;
      margin-bottom:12px;
      color:#facc15;
    }
    .bus-item{
      background:#2563eb;
      padding:10px;
      border-radius:8px;
      margin-bottom:10px;
      cursor:pointer;
      transition:0.3s;
    }
    .bus-item:hover{
      background:#3b82f6;
    }
    .bus-item strong{display:block; font-size:1rem;}

    /* Main content */
    .main{
      flex:1;
      padding:20px;
    }
    h1{color:#1e40af;font-size:1.4rem;margin-bottom:12px}
    .card{background:#fff;padding:20px;border-radius:12px;box-shadow:0 6px 18px rgba(0,0,0,0.06)}
    input{padding:10px;border-radius:8px;border:1px solid #ddd;width:100%;margin-bottom:10px}
    button{padding:10px 14px;border:none;border-radius:8px;background:#2563eb;color:#fff;cursor:pointer}
    #result{margin-top:12px;font-weight:600;color:#065f46}
  </style>
</head>
<body>
  <!-- Sidebar -->
  <div class="sidebar">
    <h2>Available Buses</h2>
    <div id="busList"></div>
  </div>

  <!-- Main Content -->
  <div class="main">
    <h1>Passenger Dashboard</h1>
    <div class="card">
      <p>Enter your Bus/Van Number to check its current location:</p>
      <input id="busNo" type="text" placeholder="e.g. 101">
      <button onclick="findBus()">Check Location</button>
      <div id="result">Location: —</div>
    </div>
  </div>

  <script>
    // Demo static routes (busNumber : route)
    const routes = {
      "101": "Station → City Center → University",
      "102": "Airport → Mall → Bus Stand",
      "62533": "Railway Station → Market → Hospital",
      "201": "Old Town → New Colony → IT Park",
      "301": "Bus Depot → Engineering College → Stadium",
      "303": "Bus Depot → Engineering College → Stadium",
      "304": "Bus Depot → Engineering College → Stadium",
      "305": "Bus Depot → Engineering College → Stadium"
    };

    // Sidebar में list भरना
    const busListDiv = document.getElementById("busList");
    Object.entries(routes).forEach(([bus, route])=>{
      const div=document.createElement("div");
      div.className="bus-item";
      div.innerHTML=`<strong>${bus}</strong><span>${route}</span>`;
      div.onclick=()=>{
        document.getElementById("busNo").value=bus;
        findBus();
      };
      busListDiv.appendChild(div);
    });

    // Location finder
    function findBus(){
      const bus = document.getElementById('busNo').value.trim();
      if(!bus){ 
        alert("Enter bus/van number"); 
        return; 
      }

      const data = JSON.parse(localStorage.getItem("bus_" + bus));
      const resultDiv = document.getElementById('result');

      if(data){
        resultDiv.innerHTML = 
          `Bus ${bus} is at Lat: ${data.lat}, Lng: ${data.lng} <br>(Last update: ${data.time})`;
      } else {
        resultDiv.textContent = `No live data found for Bus ${bus}`;
      }
    }
  </script>
</body>
</html>
