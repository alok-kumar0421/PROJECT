<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SmartBus Tracker</title>
  <style>
    :root{
      --sky-blue: #87CEEB;
      --road-gray: #4a4a4a;
      --bus-blue: #1e40af;
      --bus-window: #cce7ff;
      --wheel-dark: #222;

      --bg1: #ebf8ff;
      --bg2: #dbeafe;
      --card-bg: #ffffff;
      --primary: #2563eb;
      --success: #16a34a;
      --muted: #6b7280;
    }

    *{ box-sizing: border-box; }

    body{
      margin: 0;
      font-family: Inter, Arial, sans-serif;
      background: linear-gradient(135deg, var(--bg1), var(--bg2));
    }

    /* --- Splash --- */
    .splash-screen{
      position: fixed; inset: 0;
      display:flex; flex-direction:column;
      justify-content:center; align-items:center;
      background-color: var(--sky-blue);
      z-index:1000;
      animation: fadeOutSplashScreen 1s ease-out 4s forwards;
    }
    .splash-screen .app-title{
      color:#fff; font-size:3rem; font-weight:700;
      text-shadow: 2px 2px 8px rgba(0,0,0,.3);
      opacity:0; transform:scale(.8);
      animation: fadeInTitle 1.2s cubic-bezier(.175,.885,.32,1.275) 2s forwards;
      position:absolute;
    }
    .road{
      position:absolute; bottom:0; width:100%; height:15vh;
      background-color: var(--road-gray);
      border-top:8px solid #333;
      background-image: linear-gradient(to right, #f0f0f0 50%, transparent 50%);
      background-size: 80px 6px;
      background-repeat: repeat-x;
      background-position: center;
    }
    .bus-container{
      position:absolute; bottom:10vh; left:-200px;
      width:180px; height:100px;
      animation: moveBus 3s linear 0.5s forwards;
    }
    .bus{ width:100%; height:80%; background:var(--bus-blue); border-radius:15px 15px 5px 5px; border:3px solid #112667; position:relative; }
    .bus-window{ position:absolute; top:10px; background:var(--bus-window); height:30px; border:2px solid #112667; }
    .window-1{ left:10px; width:30px; } .window-2{ left:50px; width:30px; }
    .window-3{ left:90px; width:30px; } .window-4{ left:130px; width:30px; }
    .wheel{ position:absolute; bottom:-15px; width:35px; height:35px; background:var(--wheel-dark); border-radius:50%; border:5px solid #555; animation: spinWheels .5s linear infinite; }
    .wheel-front{ left:20px; } .wheel-back{ right:20px; }

    @keyframes moveBus{ to{ transform: translateX(120vw); } }
    @keyframes spinWheels{ to{ transform: rotate(360deg); } }
    @keyframes fadeInTitle{ to{ opacity:1; transform:scale(1); } }
    @keyframes fadeOutSplashScreen{ to{ opacity:0; visibility:hidden; } }

    /* --- Header --- */
    header{
      position:absolute; top:20px; right:20px; display:flex; gap:12px; z-index:999;
      opacity:0; pointer-events:none; transition: opacity .8s ease;
    }
    header.show{ opacity:1; pointer-events:auto; }

    /* Dropdown for three-dot menu */
    .dropdown { position: relative; display: inline-block; }
    .dropdown-content {
      position: absolute;
      right: 0;
      top: 45px;
      background-color: #fff;
      min-width: 120px;
      display: none;
      flex-direction: column;
      box-shadow: 0 8px 16px rgba(0,0,0,0.2);
      border-radius: 10px;
      overflow: hidden;
      z-index: 1000;
    }
    .dropdown-content button {
      background: var(--primary);
      color: #fff;
      border: none;
      padding: 10px;
      text-align: left;
      cursor: pointer;
      border-radius: 0;
    }
    .dropdown-content button:hover { background: #1e40af; }

    .authority-btn{
      position:relative; padding:10px 22px; font-size:1rem; font-weight:600; color:#fff;
      border:none; border-radius:50px; cursor:pointer; background-size:200% 200%;
      animation: gradientShift 4s ease infinite; box-shadow: 0 8px 20px rgba(0,0,0,.25);
      transition: transform .25s ease, box-shadow .25s ease; overflow:hidden;
    }
    .authority-btn:hover{ transform:scale(1.08); box-shadow:0 10px 25px rgba(0,0,0,.35); }
    @keyframes gradientShift{ 0%{ background-position:0% 50% } 50%{ background-position:100% 50% } 100%{ background-position:0% 50% } }
    .authority-btn::after{ content:""; position:absolute; top:0; left:-75px; width:50px; height:100%; background: rgba(255,255,255,.6); transform: skewX(-20deg); opacity:0; pointer-events:none; }
    .authority-btn.shine::after{ animation: shine 1s forwards; }
    @keyframes shine{ 0%{ left:-75px; opacity:0 } 30%{ opacity:1 } 100%{ left:120%; opacity:0 } }
    .btn-blue{ background: linear-gradient(90deg,#6366f1,#3b82f6,#2563eb); }
    .btn-red{ background: linear-gradient(90deg,#ef4444,#dc2626); }

    /* --- Main --- */
    .container{ min-height:100vh; display:flex; flex-direction:column; align-items:center; justify-content:center; padding:30px; width:100%; }
    .main-content{ max-width:1000px; text-align:center; }
    h1{ margin:0 0 8px; color:#1e40af; font-size:2.25rem; }
    p.subtitle{ color:#374151; margin-bottom:20px; }

    .grid{ display:grid; grid-template-columns:1fr; gap:28px; }
    @media(min-width:768px){ .grid{ grid-template-columns:1fr 1fr; } }

    /* --- Card base --- */
    .card{
      position:relative; border-radius:16px; padding:30px 26px; overflow:hidden; cursor:pointer;
      transition: transform 350ms cubic-bezier(.2,.9,.3,1), box-shadow 350ms cubic-bezier(.2,.9,.3,1);
      min-height:180px; display:flex; flex-direction:column; align-items:center; justify-content:center;
      border:2px solid transparent;
      background-image: linear-gradient(var(--card-bg), var(--card-bg));
      background-origin: padding-box;
      background-clip: padding-box;
      box-shadow: 0 6px 18px rgba(16,24,40,0.06);
    }

    .card .icon{ font-size:3.2rem; margin-bottom:12px; transition: transform 350ms; }
    .card h2{ margin:0; font-size:1.4rem; color:#0f172a; }
    .card p{ color:var(--muted); margin:12px 0 18px; font-size:.95rem; }

    /* Passenger: blue gradient border */
    .card[data-role="passenger"]{
      background-image:
        linear-gradient(var(--card-bg), var(--card-bg)),
        linear-gradient(135deg, #2563eb 0%, #3b82f6 100%);
      background-origin: padding-box, border-box;
      background-clip: padding-box, border-box;
      border-radius: 16px;
      border: 2px solid transparent;
    }

    /* Driver: green gradient border */
    .card[data-role="driver"]{
      background-image:
        linear-gradient(var(--card-bg), var(--card-bg)),
        linear-gradient(135deg, #16a34a 0%, #22c55e 100%);
      background-origin: padding-box, border-box;
      background-clip: padding-box, border-box;
      border-radius: 16px;
      border: 2px solid transparent;
    }

    /* Hover effects */
    .card:hover{ transform: translateY(-10px) scale(1.02); box-shadow: 0 18px 40px rgba(14,30,60,.12); }
    .card:hover .icon{ transform: rotate(-6deg) scale(1.04); }

    .action-btn{
      display:inline-block; padding:10px 18px; border-radius:10px; border:none; color:#fff; font-weight:600;
      transform: translateY(12px); opacity:0; transition: transform 320ms cubic-bezier(.2,.9,.3,1), opacity 320ms;
      box-shadow: 0 8px 20px rgba(16,24,40,0.08);
    }
    .btn-blue{ background: var(--primary); }
    .btn-green{ background: var(--success); }
    .card:hover .action-btn{ transform: translateY(0); opacity:1; }

    .card .accent{
      position:absolute; right:-40px; top:-40px; width:140px; height:140px;
      background: radial-gradient(circle at 30% 30%, rgba(37,99,235,.12), transparent 40%);
      transform: rotate(25deg); filter: blur(8px); pointer-events:none; opacity:0; transition: opacity 300ms;
    }
    .card:hover .accent{ opacity:1; }
  </style>
</head>
<body>
  <!-- Splash -->
  <div class="splash-screen">
    <div class="app-title">SmartBus Tracker</div>
    <div class="road"></div>
    <div class="bus-container">
      <div class="bus">
        <div class="bus-window window-1"></div>
        <div class="bus-window window-2"></div>
        <div class="bus-window window-3"></div>
        <div class="bus-window window-4"></div>
      </div>
      <div class="wheel wheel-front"></div>
      <div class="wheel wheel-back"></div>
    </div>
  </div>

  <!-- Header -->
  <header id="top-header">
    <div class="dropdown">
      <button id="menu-btn" class="authority-btn btn-blue">‚ãÆ</button>
      <div id="dropdown-content" class="dropdown-content"></div>
    </div>
  </header>

  <!-- Main -->
  <div class="container" role="main">
    <div class="main-content">
      <h1>SmartBus Tracker</h1>
      <p class="subtitle">Track buses in real-time ‚Äî choose who you are to continue</p>

      <div class="grid">
        <div class="card" tabindex="0" data-role="passenger">
          <div class="accent" aria-hidden="true"></div>
          <div class="icon" aria-hidden="true">üöç</div>
          <h2>I'm a Passenger</h2>
          <p>Find nearby buses, check live location and ETA for stops.</p>
          <button class="action-btn btn-blue" onclick="location.href='passenger.html'">Continue</button>
        </div>

        <div class="card" tabindex="0" data-role="driver">
          <div class="accent" aria-hidden="true"></div>
          <div class="icon" aria-hidden="true">üë®‚Äç‚úàÔ∏è</div>
          <h2>I'm a Driver</h2>
          <p>Start/stop trips and share live location with passengers.</p>
          <button class="action-btn btn-green" onclick="location.href='driver_login.html'">Continue</button>
        </div>
      </div>

      <div style="margin-top:40px;">
        <button class="authority-btn btn-blue" onclick="location.href='authority.html'">Authority Login</button>
      </div>
    </div>
  </div>

  <script>
    // Show header after splash
    setTimeout(()=> document.getElementById('top-header').classList.add('show'), 5000);

    // Shine hover effect
    document.querySelectorAll('.authority-btn').forEach(btn=>{
      btn.addEventListener('mouseenter', ()=>{
        btn.classList.remove('shine');
        void btn.offsetWidth;
        btn.classList.add('shine');
      });
    });

    // Dropdown logic with auth state
    const menuBtn = document.getElementById('menu-btn');
    const dropdownContent = document.getElementById('dropdown-content');

    function updateDropdown(){
      const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
      dropdownContent.innerHTML = ''; // clear old buttons

      if(isLoggedIn){
        const signOutBtn = document.createElement('button');
        signOutBtn.textContent = 'Sign Out';
        signOutBtn.addEventListener('click', ()=>{
          localStorage.removeItem('isLoggedIn');
          updateDropdown();
        });
        dropdownContent.appendChild(signOutBtn);
      } else {
        const signUpBtn = document.createElement('button');
        signUpBtn.textContent = 'Sign Up';
        signUpBtn.addEventListener('click', ()=>{
          localStorage.setItem('isLoggedIn','true');
          updateDropdown();
          location.href='login.html';
        });
        dropdownContent.appendChild(signUpBtn);
      }
    }

    menuBtn.addEventListener('click', (e)=>{
      e.stopPropagation();
      dropdownContent.style.display = dropdownContent.style.display === 'flex' ? 'none' : 'flex';
    });

    window.addEventListener('click', ()=>{
      dropdownContent.style.display = 'none';
    });

    updateDropdown();
  </script>
</body>
</html>
